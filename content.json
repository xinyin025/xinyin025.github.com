{"meta":{"title":"蓝骑士随意录","subtitle":"Developer","description":"Java、Internet","author":"John Xi","url":"http://blog.xiganglive.com"},"pages":[{"title":"关于","date":"2018-07-25T08:00:28.195Z","updated":"2018-07-25T08:00:28.195Z","comments":false,"path":"about/index.html","permalink":"http://blog.xiganglive.com/about/index.html","excerpt":"","text":"You have everything,You need nothing."},{"title":"分类","date":"2018-07-25T07:53:23.927Z","updated":"2018-07-25T07:53:23.927Z","comments":false,"path":"categories/index.html","permalink":"http://blog.xiganglive.com/categories/index.html","excerpt":"","text":""},{"title":"友情链接","date":"2018-07-25T07:47:58.520Z","updated":"2018-07-25T07:47:58.520Z","comments":true,"path":"links/index.html","permalink":"http://blog.xiganglive.com/links/index.html","excerpt":"","text":""},{"title":"Repositories","date":"2018-07-25T07:47:58.519Z","updated":"2018-07-25T07:47:58.519Z","comments":false,"path":"repository/index.html","permalink":"http://blog.xiganglive.com/repository/index.html","excerpt":"","text":""},{"title":"标签","date":"2018-07-25T07:54:28.007Z","updated":"2018-07-25T07:54:28.007Z","comments":false,"path":"tags/index.html","permalink":"http://blog.xiganglive.com/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"CentOS7安装ZooKeeper集群","slug":"CentOS7安装ZooKeeper集群","date":"2018-06-21T06:21:33.000Z","updated":"2018-07-25T06:45:41.005Z","comments":true,"path":"2018/06/21/CentOS7安装ZooKeeper集群/","link":"","permalink":"http://blog.xiganglive.com/2018/06/21/CentOS7安装ZooKeeper集群/","excerpt":"","text":"集群方案主机IP 消息端口:通信端口 节点目录/usr/local/下 192.168.1.1 2181 2888:3888 zookeeper 192.168.1.2 2181 2888:3888 zookeeper 192.168.1.3 2181 2888:3888 zookeeper 安装JDK# 安装JDK # 配置/etc/profile vim /etc/profile export JAVA_HOME=/usr/local/jdk export PATH=$JAVA_HOME/bin:$PATH export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar export JAVA=$JAVA_HOME/bin/java source /etc/profile 以下操作3台机器同时操作准备3台虚拟机IP地址为 192.168.1.1 192.168.1.2 192.168.1.3 新建用户useradd zookeeper passwd zookeeper 安装依赖yum install wget 下载ZooKeeper源码wget http://apache.fayea.com/zookeeper/stable/zookeeper-3.4.12.tar.gz tar -zxvf zookeeper-3.4.12.tar.gz mv zookeeper-3.4.12 /usr/local/zookeeper cd /usr/local/zookeeper/ mkdir data mkdir log chown -R zookeeper.zookeeper data chown -R zookeeper.zookeeper logs 修改配置文件# 将/conf目录下的zoo_sample.cfg文件拷贝一份， 命名为为zoo.cfg cp zoo_sample.cfg zoo.cfg vim zoo.cfg dataDir=/usr/local/zookeeper/data dataLogDir=/usr/local/zookeeper/logs # 2888 端口号是 zookeeper 服务之间通信的端口。 # 3888 是 zookeeper 与其他应用程序通信的端口。 server.0=192.168.1.1:2888:3888 server.1=192.168.1.2:2888:3888 server.2=192.168.1.3:2888:3888 新建myid文件cd /usr/local/zookeeper/data * 192.168.1.1机器: echo 0 &gt;&gt; myid * 192.168.1.2机器: echo 1 &gt;&gt; myid * 192.168.1.3机器: echo 2 &gt;&gt; myid # 这里的0,1,2对应zoo.cfg中server.x处的x 编辑.bash_profilesu - zookeeper vim .bash_profile export ZOOKEEPER_HOME=/usr/local/zookeeper # zookeeper env export PATH=$ZOOKEEPER_HOME/bin:$PATH source .bash_profile zookeeper操作cd /usr/local/zookeeper/bin vim zkServer.sh #在129行增加如下内容，因为脚本里并未读取zoo.cfg中设定的log目录 ZOO_LOG_DIR=/usr/local/zookeeper/logs # 启动zk zkServer.sh start # 查看状态 zkServer.sh status # 停止zk zkServer.sh stop # 查看日志 tail -f /usr/local/zookeeper/logs/zookeeper.out 设置ZooKeeper开机启动vim /etc/rc.local su - zookeeper -c &apos;/usr/local/zookeeper/bin/zkServer.sh start&apos; 防火墙过滤firewall-cmd --zone=public --add-port=2181/tcp --permanent firewall-cmd --zone=public --add-port=2888/tcp --permanent firewall-cmd --zone=public --add-port=3888/tcp --permanent firewall-cmd --reload","categories":[{"name":"Linux","slug":"Linux","permalink":"http://blog.xiganglive.com/categories/Linux/"},{"name":"个人作品","slug":"Linux/个人作品","permalink":"http://blog.xiganglive.com/categories/Linux/个人作品/"}],"tags":[{"name":"ZooKeeper","slug":"ZooKeeper","permalink":"http://blog.xiganglive.com/tags/ZooKeeper/"}]},{"title":"CentOS7安装Redis集群","slug":"CentOS7安装Redis集群","date":"2018-06-21T06:21:03.000Z","updated":"2018-07-25T06:45:48.192Z","comments":true,"path":"2018/06/21/CentOS7安装Redis集群/","link":"","permalink":"http://blog.xiganglive.com/2018/06/21/CentOS7安装Redis集群/","excerpt":"","text":"安装依赖yum install gcc-c++ yum install ruby ruby-devel rubygems rpm-build 安装官方脚本wget https://rubygems.org/downloads/redis-3.2.1.gem gem install redis-3.2.1.gem 下载Redis源码wget http://download.redis.io/releases/redis-3.2.11.tar.gz tar zxvf redis-3.2.11.tar.gz cd redis-3.2.11 make make PREFIX=/usr/local/redis install # 拷贝conf文件 mkdir /usr/local/redis/conf/ cp redis.conf /usr/local/redis/conf/redis.conf # 启动redis /usr/local/redis/bin/redis-server /usr/local/redis/conf/redis.conf 搭建Redis集群# 复制多个conf文件 cd /usr/local/redis/conf/ cp redis.conf redis_xxx.conf # 修改配置，每个conf文件都需修改 vim redis_xxx.conf port xxxx #修改端口 cluster-enabled yes #打开注释，开启集群模式 cluster-config-file nodes-xxxx.conf #集群的配置文件 pidfile /var/run/redis_xxxx.pid #pidfile文件 logfile &quot;xxxx.log&quot; #日志文件 dbfilename dump_xxxx.rdb #rdb持久化文件 cluster-node-timeout 5000 #请求超时，单位毫秒 appendonly yes #开启aof持久化方式 vim start-all.sh #! /bin/bash /usr/local/redis/bin/redis-server /usr/local/redis/conf/redis_1.conf /usr/local/redis/bin/redis-server /usr/local/redis/conf/redis_2.conf /usr/local/redis/bin/redis-server /usr/local/redis/conf/redis_3.conf /usr/local/redis/bin/redis-server /usr/local/redis/conf/redis_4.conf chmod +x start-all.sh ./start-all.sh # 查看是否启动成功 ps aux | grep redis root 2780 0.8 0.5 139016 9808 ? Ssl 09:29 0:45 /usr/local/redis-cluster/redis/bin/redis-server 0.0.0.0:7001 [cluster] root 2782 0.9 0.4 136968 7756 ? Ssl 09:29 0:46 /usr/local/redis-cluster/redis/bin/redis-server 0.0.0.0:7002 [cluster] 创建集群第一步：搭建集群 ./redis-trib.rb create ，选择yes接受建议的配置 第二步：进入集群客户端 ./redis-cli -h 任意主机host -p 任意主机port -c，-c表示以集群方式连接redis 第三步：保存数据 第四步：cluster info 查询集群状态信息 第五步：cluster nodes 查询集群结点信息 cd redis-3.2.11 cp src/redis-trib.rb /usr/local/redis-cluster/redis-trib.rb # 集群创建命令： ./redis-trib.rb create 创建集群，--replicas 1 给每个主机分配一个从机，后面其他参数都是redis服务的ip:port。最后输入yes来接受建议的配置 redis-trib.rb create --replicas 1 127.0.0.1:7001 127.0.01:7002 127.0.0.1:7003 127.0.0.1:7004 [OK] All 16384 slots covered. # 表示创建成功 /usr/local/redis/bin/redis-cli -h 127.0.0.1 -p 7001 -c 127.0.0.1:7001&gt; cluster info cluster_state:ok cluster_slots_assigned:16384 cluster_slots_ok:16384 cluster_slots_pfail:0 cluster_slots_fail:0 cluster_known_nodes:6 cluster_size:3 cluster_current_epoch:6 cluster_my_epoch:3 cluster_stats_messages_sent:12578 cluster_stats_messages_received:12578 添加防火墙过滤firewall-cmd --zone=public --add-port=7001/tcp --permanent firewall-cmd --zone=public --add-port=7002/tcp --permanent firewall-cmd --zone=public --add-port=7003/tcp --permanent firewall-cmd --zone=public --add-port=7004/tcp --permanent firewall-cmd --zone=public --add-port=17001/tcp --permanent # 集群通信端口号为redis端口加10000 firewall-cmd --zone=public --add-port=17002/tcp --permanent # 集群通信端口号为redis端口加10000 firewall-cmd --zone=public --add-port=17003/tcp --permanent # 集群通信端口号为redis端口加10000 firewall-cmd --zone=public --add-port=17004/tcp --permanent # 集群通信端口号为redis端口加10000 firewall-cmd --reload # 重新加载","categories":[{"name":"Linux","slug":"Linux","permalink":"http://blog.xiganglive.com/categories/Linux/"},{"name":"个人作品","slug":"Linux/个人作品","permalink":"http://blog.xiganglive.com/categories/Linux/个人作品/"}],"tags":[{"name":"Redis","slug":"Redis","permalink":"http://blog.xiganglive.com/tags/Redis/"}]},{"title":"CentOS7安装Docker-CE","slug":"CentOS7安装Docker-CE","date":"2018-06-21T06:18:36.000Z","updated":"2018-07-25T06:45:26.612Z","comments":true,"path":"2018/06/21/CentOS7安装Docker-CE/","link":"","permalink":"http://blog.xiganglive.com/2018/06/21/CentOS7安装Docker-CE/","excerpt":"","text":"卸载旧版docker及安装依赖sudo yum remove docker docker-common docker-selinux docker-engine sudo yum install -y yum-utils device-mapper-persistent-data lvm2 下载repowget -O /etc/yum.repos.d/docker-ce.repo https://download.docker.com/linux/centos/docker-ce.repo 替换软件仓库为TUNAsudo sed -i &apos;s+download.docker.com+mirrors.tuna.tsinghua.edu.cn/docker-ce+&apos; /etc/yum.repos.d/docker-ce.repo 安装sudo yum makecache fast sudo yum install docker-ce 更换国内镜像sudo vim /etc/docker/daemon.json { &quot;registry-mirrors&quot;: [ &quot;https://registry.docker-cn.com&quot; ] } sudo systemctl daemon-reload sudo systemctl restart docker # 查看是否配置成功 sudo docker info","categories":[{"name":"Linux","slug":"Linux","permalink":"http://blog.xiganglive.com/categories/Linux/"},{"name":"个人作品","slug":"Linux/个人作品","permalink":"http://blog.xiganglive.com/categories/Linux/个人作品/"}],"tags":[{"name":"CentOS7","slug":"CentOS7","permalink":"http://blog.xiganglive.com/tags/CentOS7/"},{"name":"Docker","slug":"Docker","permalink":"http://blog.xiganglive.com/tags/Docker/"}]},{"title":"Linux Shell中使用date获取毫秒","slug":"Linux Shell中使用date获取毫秒","date":"2016-11-28T07:47:22.000Z","updated":"2018-07-25T06:54:48.642Z","comments":true,"path":"2016/11/28/Linux Shell中使用date获取毫秒/","link":"","permalink":"http://blog.xiganglive.com/2016/11/28/Linux Shell中使用date获取毫秒/","excerpt":"","text":"获取yyyy-MM-dd HH:mm:ss格式时间 date “+%F %T” 获取UTC时间，单位为毫秒 date “+%s%3N”","categories":[{"name":"Linux","slug":"Linux","permalink":"http://blog.xiganglive.com/categories/Linux/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"http://blog.xiganglive.com/tags/Linux/"},{"name":"Shell","slug":"Shell","permalink":"http://blog.xiganglive.com/tags/Shell/"}]},{"title":"Sublime Text 3安装Package Control最新方法","slug":"Sublime Text 3安装Package Control最新方法","date":"2014-01-03T08:41:13.000Z","updated":"2018-07-25T06:58:07.596Z","comments":true,"path":"2014/01/03/Sublime Text 3安装Package Control最新方法/","link":"","permalink":"http://blog.xiganglive.com/2014/01/03/Sublime Text 3安装Package Control最新方法/","excerpt":"","text":"换了台机器，需要重新安装Sublime Text 3，于是顺便查了下Package Control安装方法。 然后在官网上发现，Sublime Text 3安装Package Control变成和Sublime Text 2一样简单了。 1、按Ctrl+`召唤出控制台～ 2、输入下面的代码 1import urllib.request,os,hashlib; h = '7183a2d3e96f11eeadd761d777e62404e330c659d4bb41d3bdf022e94cab3cd0'; pf = 'Package Control.sublime-package'; ipp = sublime.installed_packages_path(); urllib.request.install_opener( urllib.request.build_opener( urllib.request.ProxyHandler()) ); by = urllib.request.urlopen( 'http://sublime.wbond.net/' + pf.replace(' ', '%20')).read(); dh = hashlib.sha256(by).hexdigest(); print('Error validating download (got %s instead of %s), please try manual install' % (dh, h)) if dh != h else open(os.path.join( ipp, pf), 'wb' ).write(by) 3、回车，耐心等待，不到一分钟即下载完毕，具体时间视网速而定。","categories":[{"name":"其他","slug":"其他","permalink":"http://blog.xiganglive.com/categories/其他/"}],"tags":[{"name":"Sublime Text","slug":"Sublime-Text","permalink":"http://blog.xiganglive.com/tags/Sublime-Text/"}]},{"title":"Windows服务器开启MySQL远程登录","slug":"Windows服务器开启MySQL远程登录","date":"2013-09-23T15:19:32.000Z","updated":"2018-07-25T07:02:04.039Z","comments":true,"path":"2013/09/23/Windows服务器开启MySQL远程登录/","link":"","permalink":"http://blog.xiganglive.com/2013/09/23/Windows服务器开启MySQL远程登录/","excerpt":"","text":"1、防火墙开启端口过滤 --&gt;控制面板--&gt;防火墙--&gt;高级--&gt;添加新规则--&gt;端口 2、开启MySQL帐号远程登录功能 --&gt;登录mysql数据库 --&gt;update user set host = &#39;%&#39; where user=&#39;root&#39;;","categories":[{"name":"数据库","slug":"数据库","permalink":"http://blog.xiganglive.com/categories/数据库/"}],"tags":[{"name":"MySQL","slug":"MySQL","permalink":"http://blog.xiganglive.com/tags/MySQL/"},{"name":"Windows","slug":"Windows","permalink":"http://blog.xiganglive.com/tags/Windows/"}]},{"title":"CentOS上安装mod_jk","slug":"CentOS上安装mod_jk","date":"2013-07-10T14:15:13.000Z","updated":"2018-07-25T06:46:00.059Z","comments":true,"path":"2013/07/10/CentOS上安装mod_jk/","link":"","permalink":"http://blog.xiganglive.com/2013/07/10/CentOS上安装mod_jk/","excerpt":"","text":"为了实现前端使用Apache处理页面，后端使用JBOSS或Tomcat处理逻辑，我们需要为httpd安装mod_jk模块。 操作如下： 1、下载最新的的Apache Tomcat Connector http://tomcat.apache.org/connectors-doc/ 2、安装http-devel yum -y install httpd-devel 3、解压tomcat-connectors-1.2.37-src.tar，然后进行如下操作 cd native/ ./configure --with-apxs=/usr/sbin/apxs make make install 4、在httpd.conf中添加模块 LoadModule jk_module modules/mod_jk.so","categories":[{"name":"Linux","slug":"Linux","permalink":"http://blog.xiganglive.com/categories/Linux/"}],"tags":[{"name":"Apache","slug":"Apache","permalink":"http://blog.xiganglive.com/tags/Apache/"},{"name":"CentOS","slug":"CentOS","permalink":"http://blog.xiganglive.com/tags/CentOS/"},{"name":"JBOSS","slug":"JBOSS","permalink":"http://blog.xiganglive.com/tags/JBOSS/"}]},{"title":"JFreeChart中文乱码解决方案","slug":"JFreeChart中文乱码解决方案","date":"2013-06-19T13:52:14.000Z","updated":"2018-07-25T06:56:17.740Z","comments":true,"path":"2013/06/19/JFreeChart中文乱码解决方案/","link":"","permalink":"http://blog.xiganglive.com/2013/06/19/JFreeChart中文乱码解决方案/","excerpt":"","text":"由于JFreeChart组件的版本、操作平台、JDK的设置等因素，在使用JFreeChart组件时可能会出现中文乱码的现象。 遇到此问题时，可通过设置文字的字体来解决问题。 下面提供一种个人觉得比较好的解决方案： 1//创建主题样式 StandardChartTheme standardChartTheme=new StandardChartTheme(\"CN\"); //设置标题字体 standardChartTheme.setExtraLargeFont(new Font(\"黑体\",Font.BOLD,20)); //设置图例的字体 standardChartTheme.setRegularFont(new Font(\"宋书\",Font.PLAIN,15)); //设置轴向的字体 standardChartTheme.setLargeFont(new Font(\"宋书\",Font.PLAIN,15)); //应用主题样式 ChartFactory.setChartTheme(standardChartTheme); 这样，可以解决绝大部分图表中中文乱码的问题。","categories":[{"name":"JAVA","slug":"JAVA","permalink":"http://blog.xiganglive.com/categories/JAVA/"}],"tags":[{"name":"Java","slug":"Java","permalink":"http://blog.xiganglive.com/tags/Java/"},{"name":"JFreeChart","slug":"JFreeChart","permalink":"http://blog.xiganglive.com/tags/JFreeChart/"}]},{"title":"CentOS设置系统时间及时区","slug":"CentOS设置系统时间及时区","date":"2013-06-17T14:44:44.000Z","updated":"2018-07-25T07:01:08.962Z","comments":true,"path":"2013/06/17/CentOS设置系统时间及时区/","link":"","permalink":"http://blog.xiganglive.com/2013/06/17/CentOS设置系统时间及时区/","excerpt":"","text":"在我们使用CentOS系统的时候，经常会出现时间不准确的问题。 我们会遇到下面二种情况：一、时区正确，但时间不正确 查看当前时间及时区： 1date -R 设置年月日： 1date -s 06/17/2013 设置时分秒： 12345date -s 11:12:30``` - 保存：```bashhwclock -w 二、时区不正确 备份时区 1mv /etc/localtime /etc/localtime-old 拷贝新时区 1cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime 设置完需要重新启动 1reboot","categories":[{"name":"其他","slug":"其他","permalink":"http://blog.xiganglive.com/categories/其他/"}],"tags":[{"name":"CentOS","slug":"CentOS","permalink":"http://blog.xiganglive.com/tags/CentOS/"},{"name":"Linux","slug":"Linux","permalink":"http://blog.xiganglive.com/tags/Linux/"}]}]}